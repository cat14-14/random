<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>Presidium Systems - Seat Picker</title>
<link rel="icon" href="icon.png" type="image/png">
<style>
* { box-sizing: border-box; transition: all 0.3s ease; }
body {
font-family: 'Noto Sans KR', sans-serif;
margin: 0;
background: linear-gradient(to bottom, #e0f2fe, #dbeafe);
overflow-x: hidden;
}
header {
background: #1d4ed8;
color: white;
padding: 15px 40px;
display: flex;
justify-content: space-between;
align-items: center;
}
header .logo {
font-size: 20px;
font-weight: bold;
}
nav a {
color: white;
margin: 0 10px;
text-decoration: none;
font-weight: 500;
}
nav a:hover { text-decoration: underline; }
nav button {
margin-left: 10px;
border: none;
background: transparent;
font-size: 18px;
cursor: pointer;
}
.container {
max-width: 1000px;
margin: 50px auto;
padding: 40px;
border-radius: 20px;
background: white;
box-shadow: 0 10px 30px rgba(0,0,0,0.1);
}
h1 { text-align: center; color: #1d4ed8; }
label { font-weight: bold; display: block; color: #374151; margin-top: 20px; }
input, button {
width: 100%; padding: 10px; margin-top: 5px;
border-radius: 10px; font-size: 16px;
}
button {
background: #6366f1; color: white; border: none; font-weight: bold; margin-top: 15px;
}
button:active { transform: scale(0.97); }
.mode-selector {
display: flex;
flex-wrap: wrap;
justify-content: center;
gap: 10px;
margin-bottom: 15px;
}
.mode-selector button {
flex: 1 1 auto;
min-width: 120px;
max-width: 160px;
}
.group {
background: #f3f4f6; padding: 15px; margin-bottom: 15px;
border-left: 5px solid #6366f1; border-radius: 10px;
}
.group strong {
color: #4f46e5; display: block; margin-bottom: 5px;
}
.group span {
display: inline-block; margin: 4px; padding: 6px 10px;
background: #e0e7ff; border-radius: 8px;
}
.group span:hover {

function drawByName() {
  const names = document.getElementById('names').value.split(',').map(n => n.trim()).filter(n => n);
  const groupCount = parseInt(document.getElementById('groupCountName').value);
  const result = document.getElementById('result');
  result.innerHTML = '';
  if (!names.length || !groupCount || groupCount <= 0) return;
  shuffle(names);
  const groups = Array.from({ length: groupCount }, () => []);
  names.forEach((name, i) => groups[i % groupCount].push(name));
  groups.forEach((group, i) => {
    const div = document.createElement('div');
    div.className = 'group';
    div.innerHTML = `<strong>${i + 1}모둠</strong>` + group.map(n => `<span>${n}</span>`).join(' ');
    result.appendChild(div);
  });
}

function drawByNumber() {
  const count = parseInt(document.getElementById('count').value);
  const groupCount = parseInt(document.getElementById('groupCount').value);
  const result = document.getElementById('result');
  result.innerHTML = '';
  if (!count || !groupCount || groupCount <= 0 || count < groupCount) return;
  let list = Array.from({ length: count }, (_, i) => `${i + 1}`);
  shuffle(list);
  const base = Math.floor(count / groupCount);
  const rest = count % groupCount;
  const groups = Array.from({ length: groupCount }, () => []);
  let idx = 0;
  for (let i = 0; i < groupCount; i++) {
    for (let j = 0; j < base; j++) groups[i].push(list[idx++]);
  }
  for (let i = 0; i < rest; i++) {
    groups[groupCount - 1].push(list[idx++]);
  }
  groups.forEach((group, i) => {
    const div = document.createElement('div');
    div.className = 'group';
    div.innerHTML = `<strong>${i + 1}모둠</strong>` + group.map(n => `<span>${n}번</span>`).join(' ');
    result.appendChild(div);
  });
}

function drawLotto() {
  const total = parseInt(document.getElementById('lottoCount').value);
  const pickCount = parseInt(document.getElementById('lottoDraw').value);
  const result = document.getElementById('result');
  result.innerHTML = '';
  if (!total || !pickCount || total < pickCount) return;
  let list = Array.from({ length: total }, (_, i) => `${i + 1}`);
  shuffle(list);
  const picks = list.slice(0, pickCount);
  const box = document.createElement('div');
  box.className = 'group';
  picks.forEach(num => {
    const item = document.createElement('span');
    item.textContent = `${num}번`;
    box.appendChild(item);
  });
  result.appendChild(box);
}

let wheelItems = [];
let rotation = 0;
let isSpinning = false;
let spinVelocity = 0;

function parseWheelInput() {
  const input = document.getElementById('wheelInput').value.trim();
  if (!input) return;
  if (/^\d+$/.test(input)) {
    wheelItems = Array.from({ length: parseInt(input) }, (_, i) => `${i + 1}`);
  } else {
    wheelItems = input.split(',').map(x => x.trim()).filter(x => x);
  }
  drawWheel();
}

function getSelectedIndexFromRotation(rotation, count) {
  const arc = 2 * Math.PI / count;
  const pointerAngle = ((-Math.PI / 2 - rotation) % (2 * Math.PI) + 2 * Math.PI) % (2 * Math.PI);
  let index = Math.floor(pointerAngle / arc);
  return index;
}

function drawWheel() {
  const canvas = document.getElementById('wheelCanvas');
  if (!canvas) return;
  const ctx = canvas.getContext('2d');
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  const count = wheelItems.length;
  if (count < 2) return;
  const centerX = canvas.width / 2;
  const centerY = canvas.height / 2;
  const arc = 2 * Math.PI / count;
  const radius = 140;
  const selectedIndex = getSelectedIndexFromRotation(rotation, count);
  wheelItems.forEach((item, i) => {
    const angle = i * arc;
    ctx.beginPath();
    ctx.moveTo(centerX, centerY);
    ctx.arc(centerX, centerY, radius, angle + rotation, angle + arc + rotation);
    ctx.closePath();
    ctx.fillStyle = `hsl(${i * 360 / count}, 80%, 70%)`;
    ctx.fill();
    if (i === selectedIndex) {
      ctx.strokeStyle = 'red';
      ctx.lineWidth = 4;
      ctx.stroke();
    }
    ctx.save();
    ctx.translate(centerX, centerY);
    ctx.rotate(angle + arc / 2 + rotation);
    ctx.textAlign = 'right';
    ctx.fillStyle = '#111';
    ctx.font = '14px sans-serif';
    ctx.fillText(item, radius - 10, 5);
    ctx.restore();
  });
}

function spinWheel() {
  if (wheelItems.length < 2 || isSpinning) return;
  spinVelocity = 0.4 + Math.random() * 0.5;
  isSpinning = true;
  requestAnimationFrame(animateSpin);
}

function animateSpin() {
  if (!isSpinning) return;
  rotation += spinVelocity;
  spinVelocity *= 0.985;
  drawWheel();
  if (spinVelocity < 0.002) {
    isSpinning = false;
    const selectedIndex = getSelectedIndexFromRotation(rotation, wheelItems.length);
    const winner = wheelItems[selectedIndex];
    document.getElementById('wheelResult').innerText = winner
      ? `🎉 당첨: ${winner}`
      : '🎉 당첨: (선택 불가)';
  } else {
    requestAnimationFrame(animateSpin);
  }
}

function drawByRange() {
  const total = parseInt(document.getElementById('totalCount').value);
  const groupCount = parseInt(document.getElementById('rangeGroupCount').value);
  const input1 = document.getElementById('rangeOne').value.trim();
  const input2 = document.getElementById('rangeTwo').value.trim();
  const result = document.getElementById('result');
  result.innerHTML = '';

  if (!total || !groupCount || !input1 || !input2) return;

  function parseRange(input) {
    if (/^\d+\s*-\s*\d+$/.test(input)) {
      const [start, end] = input.split('-').map(Number);
      return Array.from({ length: end - start + 1 }, (_, i) => (start + i).toString());
    } else {
      return input.split(',').map(x => x.trim()).filter(x => x);
    }
  }

  let range1 = parseRange(input1);
  let range2 = parseRange(input2);
  shuffle(range1);
  shuffle(range2);

  const groups = Array.from({ length: groupCount }, () => []);
  for (let i = 0; i < groupCount; i++) {
    if (range1.length) groups[i].push(range1.pop());
    if (range2.length) groups[i].push(range2.pop());
  }

  const remaining = range1.concat(range2);
  groups[groups.length - 1] = groups[groups.length - 1].concat(remaining);

  groups.forEach((group, i) => {
    const div = document.createElement('div');
    div.className = 'group';
    div.innerHTML = `<strong>${i + 1}모둠</strong>` + group.map(n => `<span>${n}</span>`).join(' ');
    result.appendChild(div);
  });
}


function clearResult() {
  document.getElementById('result').innerHTML = '';
  const wheelResult = document.getElementById('wheelResult');
  if (wheelResult) wheelResult.innerText = '';
  rotation = 0;
}
</script>
</body>
</html>
