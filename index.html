<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ìë¦¬ ë½‘ê¸°</title>
  <link rel="icon" href="icon.png" type="image/png">
  <style>
    * { box-sizing: border-box; transition: all 0.3s ease; }
    body {
      font-family: 'Noto Sans KR', sans-serif;
      margin: 0;
      background: linear-gradient(to bottom, #e0f2fe, #dbeafe);
      overflow-x: hidden;
    }
    .container {
      max-width: 1000px;
      margin: 100px auto;
      padding: 50px ;
      border-radius: 20px;
      background: white;
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
    }
    h1 { text-align: center; color: #1d4ed8; }
    label { font-weight: bold; display: block; color: #374151; margin-top: 20px; }
    input, button {
      width: 100%; padding: 10px; margin-top: 5px;
      border-radius: 10px; font-size: 16px;
    }
    button {
      background: #6366f1; color: white; border: none; font-weight: bold; margin-top: 15px;
    }
    button:active { transform: scale(0.97); }
    .mode-selector {
  display: flex;
  flex-wrap: wrap;
  justify-content: center; /* ê°€ìš´ë° ì •ë ¬ */
  gap: 10px;
  margin-bottom: 15px;
}

.mode-selector button {
  flex: 1 1 auto;
  min-width: 120px;
  max-width: 160px;
}


    .group {
      background: #f3f4f6; padding: 15px; margin-bottom: 15px;
      border-left: 5px solid #6366f1; border-radius: 10px;
    }
    .group strong {
      color: #4f46e5; display: block; margin-bottom: 5px;
    }
    .group span {
      display: inline-block; margin: 4px; padding: 6px 10px;
      background: #e0e7ff; border-radius: 8px;
    }
    .group span:hover {
      background: #c7d2fe; transform: scale(1.1);
    }
    .result {
  margin-top: 20px;
  display: flex;
  flex-wrap: wrap;
  gap: 15px;
  justify-content: space-between;
}
.group {
  width: 48%; /* 2ê°œì”© ì •ë ¬ë˜ë„ë¡ ë°˜ë°˜ ë„ˆë¹„ */
}

    .hidden { display: none; }
    #wheelWrapper {
      position: relative;
      display: flex;
      flex-direction: column;
      align-items: center;
      margin-top: 20px;
    }
    #wheelCanvas {
      margin-top: 40px;
      border-radius: 50%;
    }
    .pointer {
      width: 0;
      height: 0;
      border-left: 20px solid transparent;
      border-right: 20px solid transparent;
      border-top: 30px solid red;
      position: absolute;
      top: 15px;
      z-index: 10;
    }
    #wheelResult {
      text-align: center;
      font-size: 20px;
      font-weight: bold;
      color: #1d4ed8;
      margin-top: 15px;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="lang-switch">
      <button onclick="setLanguage('ko')">ğŸ‡°ğŸ‡·</button>
      <button onclick="setLanguage('en')">ğŸ‡ºğŸ‡¸</button>
    </div>
    <h1 id="title">ìë¦¬ ë½‘ê¸°</h1>
    <div class="mode-selector">
      <button id="btnName" onclick="setMode('name')">ì´ë¦„ìœ¼ë¡œ ë½‘ê¸°</button>
      <button id="btnNumber" onclick="setMode('number')">ë²ˆí˜¸ë¡œ ë½‘ê¸°</button>
      <button id="btnLotto" onclick="setMode('lotto')">ì œë¹„ë½‘ê¸°</button>
      <button id="btnWheel" onclick="setMode('wheel')">ëŒë¦¼íŒ</button>
      <button id="btnRange" onclick="setMode('range')">ë²”ìœ„ë³„ ëœë¤ ì¡°</button>
    </div>

    <div id="nameMode">
      <label id="lblNames">ì´ë¦„ ëª©ë¡ (ì‰¼í‘œë¡œ êµ¬ë¶„)</label>
      <input type="text" id="names" placeholder="ì˜ˆ: ì² ìˆ˜, ì˜í¬, ë¯¼ìˆ˜">
      <label id="lblGroupCountName">ëª¨ë‘  ìˆ˜</label>
      <input type="number" id="groupCountName" placeholder="ì˜ˆ: 3">
      <button id="btnDrawByName" onclick="drawByName()">ì´ë¦„ ëª¨ë‘  ë½‘ê¸°</button>
    </div>

    <div id="numberMode" class="hidden">
      <label id="lblCount">ì´ ì¸ì› ìˆ˜</label>
      <input type="number" id="count" placeholder="ì˜ˆ: 10">
      <label id="lblGroupCount">ëª¨ë‘  ìˆ˜</label>
      <input type="number" id="groupCount" placeholder="ì˜ˆ: 3">
      <button id="btnDrawByNumber" onclick="drawByNumber()">ë²ˆí˜¸ ëª¨ë‘  ë½‘ê¸°</button>
    </div>

    <div id="lottoMode" class="hidden">
      <label id="lblLottoCount">ì œë¹„ë½‘ê¸° ëŒ€ìƒ ìˆ˜</label>
      <input type="number" id="lottoCount" placeholder="ì˜ˆ: 10">
      <label id="lblLottoDraw">ëª‡ ëª…ì„ ë½‘ì„ê¹Œìš”?</label>
      <input type="number" id="lottoDraw" placeholder="ì˜ˆ: 2">
      <button id="btnDrawLotto" onclick="drawLotto()">ì œë¹„ ë½‘ê¸°</button>
    </div>

    <div id="wheelMode" class="hidden">
      <label id="lblWheelInput">ëŒ€ìƒ ì´ë¦„ (ì‰¼í‘œë¡œ êµ¬ë¶„) ë˜ëŠ” ìˆ«ì ê°œìˆ˜</label>
      <input type="text" id="wheelInput" placeholder="ì˜ˆ: ì² ìˆ˜, ì˜í¬ ë˜ëŠ” 10" oninput="parseWheelInput()">
      <button id="btnSpinWheel" onclick="spinWheel()">ğŸ¡ ëŒë¦¬ê¸°</button>
      <div id="wheelWrapper">
        <div class="pointer"></div>
        <canvas id="wheelCanvas" width="300" height="300"></canvas>
      </div>
      <div id="wheelResult"></div>
    </div>

    <div id="rangeMode" class="hidden">
      <label id="lblTotalCount">ì´ ì¸ì› ìˆ˜</label>
      <input type="number" id="totalCount" placeholder="ì˜ˆ: 17">
      <label id="lblRangeGroupCount">ëª¨ë‘  ìˆ˜</label>
      <input type="number" id="rangeGroupCount" placeholder="ì˜ˆ: 8">
      <label id="lblRangeOne">ë²”ìœ„1 (ì˜ˆ: 1-8)</label>
      <input type="text" id="rangeOne" placeholder="1-8">
      <label id="lblRangeTwo">ë²”ìœ„2 (ì˜ˆ: 9-17)</label>
      <input type="text" id="rangeTwo" placeholder="9-17">
      <button id="btnDrawByRange" onclick="drawByRange()">ë²”ìœ„ë³„ ëœë¤ ì¡° ë½‘ê¸°</button>
    </div>

    <button id="btnClear" onclick="clearResult()">ê²°ê³¼ ì´ˆê¸°í™”</button>
    <div id="result" class="result"></div>
  </div>

<script>
const translations = {
  ko: {
    title: "ìë¦¬ ë½‘ê¸°",
    btnName: "ì´ë¦„ìœ¼ë¡œ ë½‘ê¸°",
    btnNumber: "ë²ˆí˜¸ë¡œ ë½‘ê¸°",
    btnLotto: "ì œë¹„ë½‘ê¸°",
    btnWheel: "ëŒë¦¼íŒ",
    btnRange: "ë²”ìœ„ë³„ ëœë¤ ì¡°",
    lblNames: "ì´ë¦„ ëª©ë¡ (ì‰¼í‘œë¡œ êµ¬ë¶„)",
    lblGroupCountName: "ëª¨ë‘  ìˆ˜",
    btnDrawByName: "ì´ë¦„ ëª¨ë‘  ë½‘ê¸°",
    lblCount: "ì´ ì¸ì› ìˆ˜",
    lblGroupCount: "ëª¨ë‘  ìˆ˜",
    btnDrawByNumber: "ë²ˆí˜¸ ëª¨ë‘  ë½‘ê¸°",
    lblLottoCount: "ì œë¹„ë½‘ê¸° ëŒ€ìƒ ìˆ˜",
    lblLottoDraw: "ëª‡ ëª…ì„ ë½‘ì„ê¹Œìš”?",
    btnDrawLotto: "ì œë¹„ ë½‘ê¸°",
    lblWheelInput: "ëŒ€ìƒ ì´ë¦„ (ì‰¼í‘œë¡œ êµ¬ë¶„) ë˜ëŠ” ìˆ«ì ê°œìˆ˜",
    btnSpinWheel: "ğŸ¡ ëŒë¦¬ê¸°",
    lblTotalCount: "ì´ ì¸ì› ìˆ˜",
    lblRangeGroupCount: "ëª¨ë‘  ìˆ˜",
    lblRangeOne: "ë²”ìœ„1 (ì˜ˆ: 1-8)",
    lblRangeTwo: "ë²”ìœ„2 (ì˜ˆ: 9-17)",
    btnDrawByRange: "ë²”ìœ„ë³„ ëœë¤ ì¡° ë½‘ê¸°",
    btnClear: "ê²°ê³¼ ì´ˆê¸°í™”"
  },
  en: {
    title: "Seat Picker",
    btnName: "Pick by Name",
    btnNumber: "Pick by Number",
    btnLotto: "Lottery",
    btnWheel: "Wheel",
    btnRange: "Range Groups",
    lblNames: "Name list (comma separated)",
    lblGroupCountName: "Number of groups",
    btnDrawByName: "Draw by Name",
    lblCount: "Total participants",
    lblGroupCount: "Number of groups",
    btnDrawByNumber: "Draw by Number",
    lblLottoCount: "Total participants for lottery",
    lblLottoDraw: "How many to pick?",
    btnDrawLotto: "Draw Lottery",
    lblWheelInput: "Names (comma separated) or number count",
    btnSpinWheel: "ğŸ¡ Spin Wheel",
    lblTotalCount: "Total participants",
    lblRangeGroupCount: "Number of groups",
    lblRangeOne: "Range 1 (ex: 1-8)",
    lblRangeTwo: "Range 2 (ex: 9-17)",
    btnDrawByRange: "Draw Range Groups",
    btnClear: "Clear Results"
  }
};

function setLanguage(lang) {
  const t = translations[lang];
  for (const key in t) {
    const el = document.getElementById(key);
    if (el) {
      if (el.tagName === 'INPUT') {
        el.placeholder = t[key];
      } else {
        el.textContent = t[key];
      }
    }
  }
}
function setMode(mode) {
  ['name', 'number', 'lotto', 'wheel', 'range'].forEach(id => {
    const el = document.getElementById(id + 'Mode');
    if (el) el.classList.add('hidden');
  });
  const show = document.getElementById(mode + 'Mode');
  if (show) show.classList.remove('hidden');
  clearResult();
  if (mode === 'wheel') {
    const input = document.getElementById('wheelInput');
    if (!input.value.trim()) input.value = '4';
    parseWheelInput();
  }
}

function shuffle(arr) {
  for (let i = arr.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [arr[i], arr[j]] = [arr[j], arr[i]];
  }
}

function drawByName() {
  const names = document.getElementById('names').value.split(',').map(n => n.trim()).filter(n => n);
  const groupCount = parseInt(document.getElementById('groupCountName').value);
  const result = document.getElementById('result');
  result.innerHTML = '';
  if (!names.length || !groupCount || groupCount <= 0) return;
  shuffle(names);
  const groups = Array.from({ length: groupCount }, () => []);
  names.forEach((name, i) => groups[i % groupCount].push(name));
  groups.forEach((group, i) => {
    const div = document.createElement('div');
    div.className = 'group';
    div.innerHTML = `<strong>${i + 1}ëª¨ë‘ </strong>` + group.map(n => `<span>${n}</span>`).join(' ');
    result.appendChild(div);
  });
}

function drawByNumber() {
  const count = parseInt(document.getElementById('count').value);
  const groupCount = parseInt(document.getElementById('groupCount').value);
  const result = document.getElementById('result');
  result.innerHTML = '';
  if (!count || !groupCount || groupCount <= 0 || count < groupCount) return;
  let list = Array.from({ length: count }, (_, i) => `${i + 1}`);
  shuffle(list);
  const base = Math.floor(count / groupCount);
  const rest = count % groupCount;
  const groups = Array.from({ length: groupCount }, () => []);
  let idx = 0;
  for (let i = 0; i < groupCount; i++) {
    for (let j = 0; j < base; j++) groups[i].push(list[idx++]);
  }
  for (let i = 0; i < rest; i++) {
    groups[groupCount - 1].push(list[idx++]);
  }
  groups.forEach((group, i) => {
    const div = document.createElement('div');
    div.className = 'group';
    div.innerHTML = `<strong>${i + 1}ëª¨ë‘ </strong>` + group.map(n => `<span>${n}ë²ˆ</span>`).join(' ');
    result.appendChild(div);
  });
}

function drawLotto() {
  const total = parseInt(document.getElementById('lottoCount').value);
  const pickCount = parseInt(document.getElementById('lottoDraw').value);
  const result = document.getElementById('result');
  result.innerHTML = '';
  if (!total || !pickCount || total < pickCount) return;
  let list = Array.from({ length: total }, (_, i) => `${i + 1}`);
  shuffle(list);
  const picks = list.slice(0, pickCount);
  const box = document.createElement('div');
  box.className = 'group';
  picks.forEach(num => {
    const item = document.createElement('span');
    item.textContent = `${num}ë²ˆ`;
    box.appendChild(item);
  });
  result.appendChild(box);
}

let wheelItems = [];
let rotation = 0;
let isSpinning = false;
let spinVelocity = 0;

function parseWheelInput() {
  const input = document.getElementById('wheelInput').value.trim();
  if (!input) return;
  if (/^\d+$/.test(input)) {
    wheelItems = Array.from({ length: parseInt(input) }, (_, i) => `${i + 1}`);
  } else {
    wheelItems = input.split(',').map(x => x.trim()).filter(x => x);
  }
  drawWheel();
}

function getSelectedIndexFromRotation(rotation, count) {
  const arc = 2 * Math.PI / count;
  const pointerAngle = ((-Math.PI / 2 - rotation) % (2 * Math.PI) + 2 * Math.PI) % (2 * Math.PI);
  let index = Math.floor(pointerAngle / arc);
  return index;
}

function drawWheel() {
  const canvas = document.getElementById('wheelCanvas');
  if (!canvas) return;
  const ctx = canvas.getContext('2d');
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  const count = wheelItems.length;
  if (count < 2) return;
  const centerX = canvas.width / 2;
  const centerY = canvas.height / 2;
  const arc = 2 * Math.PI / count;
  const radius = 140;
  const selectedIndex = getSelectedIndexFromRotation(rotation, count);
  wheelItems.forEach((item, i) => {
    const angle = i * arc;
    ctx.beginPath();
    ctx.moveTo(centerX, centerY);
    ctx.arc(centerX, centerY, radius, angle + rotation, angle + arc + rotation);
    ctx.closePath();
    ctx.fillStyle = `hsl(${i * 360 / count}, 80%, 70%)`;
    ctx.fill();
    if (i === selectedIndex) {
      ctx.strokeStyle = 'red';
      ctx.lineWidth = 4;
      ctx.stroke();
    }
    ctx.save();
    ctx.translate(centerX, centerY);
    ctx.rotate(angle + arc / 2 + rotation);
    ctx.textAlign = 'right';
    ctx.fillStyle = '#111';
    ctx.font = '14px sans-serif';
    ctx.fillText(item, radius - 10, 5);
    ctx.restore();
  });
}

function spinWheel() {
  if (wheelItems.length < 2 || isSpinning) return;
  spinVelocity = 0.4 + Math.random() * 0.5;
  isSpinning = true;
  requestAnimationFrame(animateSpin);
}

function animateSpin() {
  if (!isSpinning) return;
  rotation += spinVelocity;
  spinVelocity *= 0.985;
  drawWheel();
  if (spinVelocity < 0.002) {
    isSpinning = false;
    const selectedIndex = getSelectedIndexFromRotation(rotation, wheelItems.length);
    const winner = wheelItems[selectedIndex];
    document.getElementById('wheelResult').innerText = winner
      ? `ğŸ‰ ë‹¹ì²¨: ${winner}`
      : 'ğŸ‰ ë‹¹ì²¨: (ì„ íƒ ë¶ˆê°€)';
  } else {
    requestAnimationFrame(animateSpin);
  }
}

function drawByRange() {
  const total = parseInt(document.getElementById('totalCount').value);
  const groupCount = parseInt(document.getElementById('rangeGroupCount').value);
  const input1 = document.getElementById('rangeOne').value.trim();
  const input2 = document.getElementById('rangeTwo').value.trim();
  const result = document.getElementById('result');
  result.innerHTML = '';

  if (!total || !groupCount || !input1 || !input2) return;

  function parseRange(input) {
    if (/^\d+\s*-\s*\d+$/.test(input)) {
      const [start, end] = input.split('-').map(Number);
      return Array.from({ length: end - start + 1 }, (_, i) => (start + i).toString());
    } else {
      return input.split(',').map(x => x.trim()).filter(x => x);
    }
  }

  let range1 = parseRange(input1);
  let range2 = parseRange(input2);
  shuffle(range1);
  shuffle(range2);

  const groups = Array.from({ length: groupCount }, () => []);
  for (let i = 0; i < groupCount; i++) {
    if (range1.length) groups[i].push(range1.pop());
    if (range2.length) groups[i].push(range2.pop());
  }

  const remaining = range1.concat(range2);
  groups[groups.length - 1] = groups[groups.length - 1].concat(remaining);

  groups.forEach((group, i) => {
    const div = document.createElement('div');
    div.className = 'group';
    div.innerHTML = `<strong>${i + 1}ëª¨ë‘ </strong>` + group.map(n => `<span>${n}</span>`).join(' ');
    result.appendChild(div);
  });
}


function clearResult() {
  document.getElementById('result').innerHTML = '';
  const wheelResult = document.getElementById('wheelResult');
  if (wheelResult) wheelResult.innerText = '';
  rotation = 0;
}
</script>
</body>
</html>
